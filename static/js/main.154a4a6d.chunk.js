(this.webpackJsonpfeed=this.webpackJsonpfeed||[]).push([[0],{19:function(e,t,a){},20:function(e,t,a){"use strict";a.r(t);var n=a(0),c=a(2),s=a.n(c),r=a(9),i=a.n(r),d=(a(19),a(8)),o=a(4),l=a(1),j=a(6),u=a(10),h=a(11),m=a(13),O=a(12);function b(){for(var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:10,t="",a="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",n=a.length,c=0;c<e;c++)t+=a.charAt(Math.floor(Math.random()*n));return t}var p=function(e){Object(m.a)(a,e);var t=Object(O.a)(a);function a(e){var n;return Object(u.a)(this,a),(n=t.call(this,e)).state={UPDATE_WEIGHT:1,CREATION_WEIGHT:1,TRENDING_WEIGHT:1,CREATE_NORM:15,UPDATE_NORM:15,TRENDING_NORM:1e3,REACTIONS_TRENDING_WEIGHT:.2,items:{}},n}return Object(h.a)(a,[{key:"createItem",value:function(){var e=2+Math.floor(Math.random()*this.state.CREATE_NORM);return{id:b(),reactions:Math.floor(Math.random()*this.state.CREATE_NORM),comments:Math.floor(Math.random()*this.state.CREATE_NORM),createdAt:e,updatedAt:Math.floor(Math.random()*e)}}},{key:"createItems",value:function(){for(var e={},t=1;t<15;t++){var a=this.createItem();e[a.id]=a}var n={id:"New",reactions:0,comments:0,createdAt:0,updatedAt:0,name:"new item"};e[n.id]=n;var c={id:"Trending",reactions:Math.max.apply(Math,Object(j.a)(Object.values(e).map((function(e){return e.reactions}))))+5,comments:Math.max.apply(Math,Object(j.a)(Object.values(e).map((function(e){return e.comments}))))+5,createdAt:this.state.CREATE_NORM,updatedAt:this.state.UPDATE_NORM,name:"Old + trending"};e[c.id]=c,this.setState({items:e,selected:n.id})}},{key:"componentDidMount",value:function(){this.createItems()}},{key:"getTrendingRate",value:function(e){var t=e.reactions,a=void 0===t?0:t,n=e.comments,c=void 0===n?0:n,s=this.state,r=s.TRENDING_NORM;return(a+c*s.REACTIONS_TRENDING_WEIGHT)/r}},{key:"updateItem",value:function(e,t){this.setState({items:Object(l.a)(Object(l.a)({},this.state.items),{},Object(o.a)({},e,Object(l.a)(Object(l.a)({},this.state.items[e]),t)))})}},{key:"updateParam",value:function(e,t){this.setState(Object(l.a)(Object(l.a)({},this.state),{},Object(o.a)({},e,t)))}},{key:"score",value:function(e,t){var a=this.getTrendingRate(e),n={item:e};n.trendingScore=a>=t?1:a<=0?0:a/t;var c=this.state.UPDATE_NORM,s=e.updatedAt;n.updateScore=s>=c?0:s<=0?1:1-s/c;var r=this.state.CREATE_NORM,i=e.createdAt;n.createScore=i>=r?0:i<=0?1:1-i/r;var d=this.state,o=d.UPDATE_WEIGHT,l=d.CREATION_WEIGHT,j=d.TRENDING_WEIGHT;return n.totalScore=l*n.createScore+o*n.updateScore+n.trendingScore*j,n}},{key:"renderItems",value:function(e){var t=this;return Object(n.jsx)("div",{children:e.map((function(e,a){var c=e.item,s=e.totalScore,r=e.trendingScore,i=e.updateScore,d=e.createScore;return Object(n.jsxs)("li",{className:c.id===t.state.selected?"selected":"",children:[Object(n.jsxs)("h2",{children:[c.name&&Object(n.jsxs)("span",{className:"name",children:["[",c.name,"]"]}),"TotalScore: ",s.toFixed(6)]}),Object(n.jsxs)("h3",{children:["Trending Score ",r]}),Object(n.jsxs)("h3",{children:["Update Score ",i]}),Object(n.jsxs)("h3",{children:["Publish Score ",d]}),c.id!==t.state.selected?Object(n.jsx)("button",{className:"selectButton",onClick:function(){t.setState({selected:c.id})},children:"Select"}):null,Object(n.jsx)("hr",{}),Object(n.jsxs)("div",{style:{display:"flex",justifyContent:"space-around"},children:[Object(n.jsxs)("div",{children:[Object(n.jsxs)("div",{children:[Object(n.jsx)("small",{children:"Created"}),Object(n.jsx)("input",{type:"number",value:c.createdAt,min:0,onChange:function(e){var a=parseInt(e.target.value);t.updateItem(c.id,{createdAt:a,updatedAt:a<c.updatedAt?a:c.updatedAt})}}),Object(n.jsx)("i",{children:"days ago"})]}),Object(n.jsxs)("div",{children:[Object(n.jsx)("small",{children:"Updated"}),Object(n.jsx)("input",{type:"number",value:c.updatedAt,min:0,max:c.createdAt,onChange:function(e){t.updateItem(c.id,{updatedAt:parseInt(e.target.value)})}}),Object(n.jsx)("i",{children:"days ago"})]})]}),Object(n.jsxs)("div",{children:[Object(n.jsxs)("div",{children:[Object(n.jsx)("small",{children:"Comments"}),Object(n.jsx)("input",{type:"number",value:c.comments,min:0,onChange:function(e){t.updateItem(c.id,{comments:parseInt(e.target.value)})}})]}),Object(n.jsxs)("div",{children:[Object(n.jsx)("small",{children:"Reactions"}),Object(n.jsx)("input",{type:"number",value:c.reactions,min:0,onChange:function(e){t.updateItem(c.id,{reactions:parseInt(e.target.value)})}})]})]})]})]},a)}))})}},{key:"render",value:function(){var e=this,t=this.state,a=t.CREATION_WEIGHT,c=t.UPDATE_WEIGHT,s=t.TRENDING_WEIGHT,r=Object.values(this.state.items),i=Math.max.apply(Math,[0].concat(Object(j.a)(r.map((function(t){return e.getTrendingRate(t)}))))),o=r.map((function(t){return e.score(t,i)})).sort((function(e,t){var a=e.totalScore;return t.totalScore-a}));return Object(n.jsxs)("div",{children:[Object(n.jsx)("h1",{children:"Params"}),Object.entries(this.state).filter((function(e){var t=Object(d.a)(e,1)[0];return!["items","selected","TRENDING_NORM"].includes(t)})).map((function(t,a){var c=Object(d.a)(t,2),s=c[0],r=c[1];return Object(n.jsxs)("div",{children:[s,Object(n.jsx)("input",{type:"number",value:r,min:0,onChange:function(t){e.updateParam(s,parseFloat(t.target.value))}})]},a)})),Object(n.jsxs)("small",{children:[" Max trending rate: ",i.toFixed(3)," ",Object(n.jsx)("br",{})]}),Object(n.jsxs)("small",{children:["Total Score = ",Object(n.jsx)("b",{children:c})," * updateScore + ",Object(n.jsxs)("b",{children:[a," "]}),"* cteationScore + ",Object(n.jsx)("b",{children:s})," * trendingScore"]}),Object(n.jsx)("hr",{}),Object(n.jsx)("button",{onClick:function(){e.createItems()},children:"Regenerate"}),Object(n.jsx)("hr",{}),Object(n.jsxs)("div",{className:"container",children:[Object(n.jsx)("div",{style:{position:"fixed",right:100},children:this.state.selected?this.renderItems([this.score(this.state.items[this.state.selected],i)]):Object(n.jsx)("li",{children:"Select item to edit"})}),this.renderItems(o)]})]})}}]),a}(s.a.Component);i.a.render(Object(n.jsx)(s.a.StrictMode,{children:Object(n.jsx)(p,{})}),document.getElementById("root"))}},[[20,1,2]]]);
//# sourceMappingURL=main.154a4a6d.chunk.js.map