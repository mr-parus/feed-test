{"version":3,"sources":["Feed.js","index.js"],"names":["makeId","length","result","characters","charactersLength","i","charAt","Math","floor","random","Feed","props","state","UPDATE_WEIGHT","CREATION_WEIGHT","TRENDING_WEIGHT","CREATE_NORM","UPDATE_NORM","TRENDING_NORM","REACTIONS_TRENDING_WEIGHT","items","createdAt","this","id","reactions","comments","updatedAt","color","toString","item","createItem","newItem","name","oldAndTrending","max","Object","values","map","a","setState","selected","createItems","itemId","update","value","maxTrendingRate","trendingRate","getTrendingRate","trendingScore","updateScore","createScore","totalScore","itemScores","disabled","className","toFixed","onClick","style","display","justifyContent","type","min","onChange","e","newValue","parseInt","target","updateItem","score","sort","entries","filter","key","includes","updateParam","parseFloat","position","right","renderItems","React","Component","ReactDOM","render","StrictMode","document","getElementById"],"mappings":"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","file":"static/js/main.2b047739.chunk.js","sourcesContent":["import React from 'react';\n\nfunction makeId(length = 10) {\n    var result = \"\";\n    var characters =\n        \"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789\";\n    var charactersLength = characters.length;\n    for (var i = 0; i < length; i++) {\n        result += characters.charAt(Math.floor(Math.random() * charactersLength));\n    }\n    return result;\n}\n\nexport class Feed extends React.Component {\n    constructor(props) {\n        super(props);\n        this.state = {\n            UPDATE_WEIGHT: 1,\n            CREATION_WEIGHT: 1,\n            TRENDING_WEIGHT: 1,\n            CREATE_NORM: 15,\n            UPDATE_NORM: 15,\n            TRENDING_NORM: 1000,\n            REACTIONS_TRENDING_WEIGHT: 1 / 5,\n            items: {},\n        };\n    }\n\n    createItem() {\n        const createdAt =  2 + Math.floor(Math.random() * this.state.CREATE_NORM);\n\n        return {\n            id: makeId(),\n            reactions: Math.floor(Math.random() * this.state.CREATE_NORM),\n            comments: Math.floor(Math.random() * this.state.CREATE_NORM),\n            createdAt,\n            updatedAt: Math.floor(Math.random() * createdAt),\n            color: \"#\" + Math.floor(Math.random()*16777215).toString(16),\n        };\n    }\n\n    createItems() {\n        const items = {};\n\n        for (let i = 1; i < 15; i++) {\n            const item = this.createItem();\n            items[item.id] = item;\n        }\n\n        const newItem = {\n            id: \"New\",\n            reactions: 0,\n            comments: 0,\n            createdAt: 0,\n            updatedAt: 0,\n            name: \"new item\",\n        }\n        items[newItem.id] = newItem;\n\n        const oldAndTrending = {\n            id: \"Trending\",\n            reactions: Math.max(...Object.values(items).map((a) => a.reactions)) + 5,\n            comments: Math.max(...Object.values(items).map((a) => a.comments)) + 5,\n            createdAt: this.state.CREATE_NORM,\n            updatedAt: this.state.UPDATE_NORM,\n            name: \"Old + trending\",\n        }\n        items[oldAndTrending.id] = oldAndTrending;\n\n        this.setState({ items, selected: newItem.id});\n    }\n\n    componentDidMount() {\n        this.createItems()\n    }\n\n    getTrendingRate(item) {\n        const { reactions = 0, comments = 0 } = item;\n        const { TRENDING_NORM, REACTIONS_TRENDING_WEIGHT } = this.state;\n\n        return (reactions + comments * REACTIONS_TRENDING_WEIGHT) / TRENDING_NORM;\n    }\n\n    updateItem(itemId, update) {\n        this.setState({\n            items: {\n                ...this.state.items,\n                [itemId]: {\n                    ...this.state.items[itemId],\n                    ...update,\n                },\n            },\n        });\n    }\n\n    updateParam(name, value) {\n        this.setState({\n            ...this.state,\n            [name]: value,\n        });\n    }\n\n    score(item, maxTrendingRate) {\n        const trendingRate = this.getTrendingRate(item);\n        const result = { item };\n\n        result.trendingScore =\n            trendingRate >= maxTrendingRate\n                ? 1\n                : trendingRate <= 0\n                ? 0\n                : trendingRate / maxTrendingRate;\n\n        const { UPDATE_NORM } = this.state;\n        const { updatedAt } = item;\n        result.updateScore =\n            updatedAt >= UPDATE_NORM\n                ? 0\n                : updatedAt <= 0\n                ? 1\n                : 1 - updatedAt / UPDATE_NORM;\n\n        const { CREATE_NORM } = this.state;\n        const { createdAt } = item;\n        result.createScore =\n            createdAt >= CREATE_NORM\n                ? 0\n                : createdAt <= 0\n                ? 1\n                : 1 - createdAt / CREATE_NORM;\n\n        const { UPDATE_WEIGHT, CREATION_WEIGHT, TRENDING_WEIGHT } = this.state;\n\n        result.totalScore =\n            CREATION_WEIGHT * result.createScore +\n            UPDATE_WEIGHT * result.updateScore +\n            result.trendingScore * TRENDING_WEIGHT;\n\n        return result;\n    }\n\n    renderItems(itemScores, disabled = false) {\n        return (\n            <div>\n                {itemScores.map(\n                    (\n                        { item, totalScore, trendingScore, updateScore, createScore },\n                        i\n                    ) => (\n                        <li key={i} className={item.id === this.state.selected ? \"selected\" : \"\"}>\n                            <h2>\n                                {item.name && <span className=\"name\">[{item.name}]</span>}\n                                TotalScore: {totalScore.toFixed(6)}\n                            </h2>\n                            <h3>Trending Score {trendingScore}</h3>\n                            <h3>Update Score {updateScore}</h3>\n                            <h3>Publish Score {createScore}</h3>\n\n                            {item.id !== this.state.selected\n                                ? (      <button className='selectButton'\n                                                 onClick={() => {\n                                                     this.setState({selected: item.id})\n                                                 }}\n                                >Select</button>)\n                                : null\n                            }\n\n                            <hr/>\n\n                            <b><i style={{color: item.color}}>{item.id}</i></b>\n\n                            <div style={{display:'flex', justifyContent:'space-around'}}>\n                                <div>\n                                    <div>\n                                        <small>Created</small>\n                                        <input\n                                            disabled={disabled}\n                                            type=\"number\"\n                                            value={item.createdAt}\n                                            min={0}\n                                            onChange={(e) => {\n                                                const newValue = parseInt(e.target.value);\n                                                this.updateItem(item.id, {\n                                                    createdAt: newValue,\n                                                    updatedAt:\n                                                        newValue < item.updatedAt ? newValue : item.updatedAt,\n                                                });\n                                            }}\n                                        />\n                                        <i>days ago</i>\n                                    </div>\n\n                                    <div>\n                                        <small>Updated</small>\n                                        <input\n                                            disabled={disabled}\n                                            type=\"number\"\n                                            value={item.updatedAt}\n                                            min={0}\n                                            max={item.createdAt}\n                                            onChange={(e) => {\n                                                this.updateItem(item.id, {\n                                                    updatedAt: parseInt(e.target.value),\n                                                });\n                                            }}\n                                        />\n                                        <i>days ago</i>\n                                    </div>\n                                </div>\n                                <div>\n                                    <div>\n                                        <small>Comments</small>\n                                        <input\n                                            disabled={disabled}\n                                            type=\"number\"\n                                            value={item.comments}\n                                            min={0}\n                                            onChange={(e) => {\n                                                this.updateItem(item.id, {\n                                                    comments: parseInt(e.target.value),\n                                                });\n                                            }}\n                                        />\n                                    </div>\n                                    <div>\n                                        <small>Reactions</small>\n                                        <input\n                                            disabled={disabled}\n                                            type=\"number\"\n                                            value={item.reactions}\n                                            min={0}\n                                            onChange={(e) => {\n                                                this.updateItem(item.id, {\n                                                    reactions: parseInt(e.target.value),\n                                                });\n                                            }}\n                                        />\n                                    </div>\n                                </div>\n                            </div>\n                        </li>\n                    )\n                )}\n            </div>\n        )\n    }\n\n    render() {\n        const { CREATION_WEIGHT, UPDATE_WEIGHT, TRENDING_WEIGHT } = this.state;\n        const items =  Object.values(this.state.items);\n        const maxTrendingRate = Math.max(0, ...items.map((i) => this.getTrendingRate(i)));\n        const itemScores = items.map((item) => this.score(item, maxTrendingRate))\n            .sort(({totalScore: a}, {totalScore: b}) => b - a)\n\n\n        return (\n            <div>\n                <h1>Params</h1>\n                {Object.entries(this.state)\n                    .filter(([key]) => ![\"items\", 'selected', 'TRENDING_NORM'].includes(key))\n                    .map(([key, value], i) => {\n                        return (\n                            <div key={i}>\n                                {key}\n                                <input\n                                    type=\"number\"\n                                    value={value}\n                                    min={0}\n                                    onChange={(e) => {\n                                        this.updateParam(key, parseFloat(e.target.value));\n                                    }}\n                                />\n                            </div>\n                        );\n                    })}\n                <small> Max trending rate: {maxTrendingRate.toFixed(3)} <br/></small>\n                <small>\n                    Total Score = <b>{UPDATE_WEIGHT}</b> * updateScore + <b>{CREATION_WEIGHT} </b>*\n                    cteationScore + <b>{TRENDING_WEIGHT}</b> * trendingScore\n                </small>\n                <hr/>\n                <button onClick={() => {this.createItems();}}>Regenerate</button>\n                <hr />\n\n                <div className='container'>\n                    <div style={{position: \"fixed\", right: 100}}>\n                        {this.state.selected\n                            ?this.renderItems([ this.score(this.state.items[this.state.selected], maxTrendingRate)])\n                            : <li>Select item to edit</li>}\n                    </div>\n                    {this.renderItems(itemScores, true)}\n                </div>\n            </div>\n        );\n    }\n}\n","import React from 'react';\nimport ReactDOM from 'react-dom';\nimport './index.css';\nimport {Feed} from './Feed';\n\nReactDOM.render(\n  <React.StrictMode>    \n    <Feed />\n  </React.StrictMode>,\n  document.getElementById('root')\n);\n"],"sourceRoot":""}