(this.webpackJsonpfeed=this.webpackJsonpfeed||[]).push([[0],{20:function(e,t,n){},28:function(e,t,n){"use strict";n.r(t);var r=n(0),a=n(1),c=n.n(a),i=n(9),s=n.n(i),d=(n(20),n(7)),o=n(4),l=n(2),u=n(10),j=n(11),h=n(14),O=n(13),b=n(12),m=n.n(b);function x(){for(var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:10,t="",n="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",r=n.length,a=0;a<e;a++)t+=n.charAt(Math.floor(Math.random()*r));return t}function p(){var e=function(){return Math.floor(256*Math.random())};return"rgba("+e()+","+e()+","+e()+", 0.6)"}var v=function(e){var t=2+Math.floor(Math.random()*e);return{id:x(),reactions:Math.floor(10*Math.random()*t),comments:Math.floor(5*Math.random()*t),createdAt:t,updatedAt:Math.floor(Math.random()*t),color:p()}},E=n(8),T=function(e,t){var n=e.reactions,r=void 0===n?0:n,a=e.comments,c=void 0===a?0:a;return(r*t.REACTIONS_TRENDING_WEIGHT+c)/t.TRENDING_NORM},I=function(e,t){return e>=t?0:e<=0?1:1-e/t},f=function(e,t){var n=t.UPDATE_NORM,r=t.CREATE_NORM,a=t.UPDATE_WEIGHT,c=t.CREATION_WEIGHT,i=t.TRENDING_WEIGHT,s=function(e,t){return Math.max.apply(Math,[0].concat(Object(E.a)(e.map((function(e){return T(e,t)})))))}(e,t),d=e.map((function(e){var d,o,l=e.updatedAt,u=e.createdAt,j={item:e};return j.trendingRate=T(e,t),j.trendingScore=(d=j.trendingRate)>=(o=s)?1:d<=0?0:d/o,j.updateScore=I(l,n),j.createScore=I(u,r),j.totalScore=c*j.createScore+a*j.updateScore+i*j.trendingScore,j})),o=Object(E.a)(new Set(d.map((function(e){return e.trendingRate})))).sort((function(e,t){return e-t})),l=o.length;return(d=d.map((function(e){return e.trendingOrderScore=(o.indexOf(e.trendingRate)+1)/l,e.totalOrderScore=c*e.createScore+a*e.updateScore+i*e.trendingOrderScore,e}))).maxTrendingRate=s,d},g=function(e){Object(h.a)(n,e);var t=Object(O.a)(n);function n(e){var r;return Object(u.a)(this,n),(r=t.call(this,e)).state={UPDATE_WEIGHT:1,CREATION_WEIGHT:1,TRENDING_WEIGHT:1,CREATE_NORM:15,UPDATE_NORM:5,TRENDING_NORM:1e3,REACTIONS_TRENDING_WEIGHT:.2,algoParamNames:["UPDATE_WEIGHT","CREATION_WEIGHT","TRENDING_WEIGHT","CREATE_NORM","UPDATE_NORM","TRENDING_NORM","REACTIONS_TRENDING_WEIGHT"],items:{},itemsCount:15},r}return Object(j.a)(n,[{key:"createItems",value:function(){for(var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:15,t={},n={id:"New",reactions:0,comments:0,createdAt:0,updatedAt:0,name:"new item",color:"red"},r=0;r<e;r++){var a=0===r?n:v(this.state.CREATE_NORM);t[a.id]=a}this.setState({items:t,selected:n.id})}},{key:"componentDidMount",value:function(){this.createItems()}},{key:"updateItem",value:function(e,t){this.setState({items:Object(l.a)(Object(l.a)({},this.state.items),{},Object(o.a)({},e,Object(l.a)(Object(l.a)({},this.state.items[e]),t)))})}},{key:"updateParam",value:function(e,t){this.setState(Object(l.a)(Object(l.a)({},this.state),{},Object(o.a)({},e,t)))}},{key:"renderItems",value:function(e){var t=this,n=arguments.length>1&&void 0!==arguments[1]&&arguments[1],a=arguments.length>2&&void 0!==arguments[2]&&arguments[2];return Object(r.jsx)("ol",{children:e.map((function(e,c){var i=e.createScore,s=e.item,d=e.totalOrderScore,o=e.totalScore,l=e.trendingOrderScore,u=(e.trendingRate,e.trendingScore),j=e.updateScore;return Object(r.jsxs)("li",{className:s.id===t.state.selected?"selected":"",style:{borderLeft:"15px ".concat(s.color," solid")},children:[Object(r.jsxs)("h2",{children:[s.name&&Object(r.jsxs)("span",{className:"name",children:["[",s.name,"]"]}),"TotalScore: ",(a?d:o).toFixed(6)]}),Object(r.jsx)("h3",{children:Object(r.jsxs)("u",{children:["Trending Score ",(a?l:u).toFixed(5)]})}),Object(r.jsxs)("h3",{children:["Update Score ",j.toFixed(5)]}),Object(r.jsxs)("h3",{children:["Publish Score ",i.toFixed(5)]}),s.id!==t.state.selected?Object(r.jsx)("button",{className:"selectButton",onClick:function(){t.setState({selected:s.id})},children:"Select"}):null,Object(r.jsx)("hr",{}),Object(r.jsx)("b",{children:Object(r.jsx)("i",{style:{color:s.color},children:s.id})}),Object(r.jsxs)("div",{style:{display:"flex",justifyContent:"space-around"},children:[Object(r.jsxs)("div",{children:[Object(r.jsxs)("div",{children:[Object(r.jsx)("small",{children:"Created"}),Object(r.jsx)("input",{disabled:n,type:"number",value:s.createdAt,min:0,onChange:function(e){var n=parseInt(e.target.value);t.updateItem(s.id,{createdAt:n,updatedAt:n<s.updatedAt?n:s.updatedAt})}}),Object(r.jsxs)("i",{children:["days ago"," ",n?"":"(max:".concat(t.state.CREATE_NORM,")")]})]}),Object(r.jsxs)("div",{children:[Object(r.jsx)("small",{children:"Updated"}),Object(r.jsx)("input",{disabled:n,type:"number",value:s.updatedAt,min:0,max:s.createdAt,onChange:function(e){t.updateItem(s.id,{updatedAt:parseInt(e.target.value)})}}),Object(r.jsxs)("i",{children:["days ago "," ",n?"":"(max:".concat(Math.min(t.state.UPDATE_NORM,s.createdAt),")")]})]})]}),Object(r.jsxs)("div",{children:[Object(r.jsxs)("div",{children:[Object(r.jsx)("small",{children:"Comments"}),Object(r.jsx)("input",{disabled:n,type:"number",value:s.comments,min:0,onChange:function(e){t.updateItem(s.id,{comments:parseInt(e.target.value)})}})]}),Object(r.jsxs)("div",{children:[Object(r.jsx)("small",{children:"Reactions"}),Object(r.jsx)("input",{disabled:n,type:"number",value:s.reactions,min:0,onChange:function(e){t.updateItem(s.id,{reactions:parseInt(e.target.value)})}})]})]})]})]},c)}))})}},{key:"render",value:function(){var e=this,t=this.state,n=t.CREATION_WEIGHT,a=t.UPDATE_WEIGHT,c=t.TRENDING_WEIGHT,i=Object.values(this.state.items),s=f(i,this.state).sort((function(e,t){var n=e.totalScore;return t.totalScore-n})),o=f(i,this.state).sort((function(e,t){var n=e.totalOrderScore;return t.totalOrderScore-n}));return Object(r.jsxs)("div",{children:[Object(r.jsx)("h1",{children:"Params v0.0.2"}),Object(r.jsxs)("div",{children:[Object.entries(this.state).filter((function(t){var n=Object(d.a)(t,1)[0];return e.state.algoParamNames.includes(n)})).map((function(t,n){var a=Object(d.a)(t,2),c=a[0],i=a[1];return Object(r.jsxs)("div",{children:[c,Object(r.jsx)("input",{step:["REACTIONS_TRENDING_WEIGHT","TRENDING_WEIGHT","UPDATE_WEIGHT","CREATION_WEIGHT"].includes(c)?.1:1,type:"number",value:i,min:0,onChange:function(t){e.updateParam(c,parseFloat(t.target.value))}})]},n)})),Object(r.jsxs)("small",{children:[" Max trending rate: ",s.maxTrendingRate.toFixed(3)," ",Object(r.jsx)("br",{})]}),Object(r.jsxs)("small",{children:["Total Score = ",Object(r.jsx)("b",{children:a})," * updateScore + ",Object(r.jsxs)("b",{children:[n," "]}),"* creationScore + ",Object(r.jsx)("b",{children:c})," * trendingScore"]})]}),Object(r.jsx)("hr",{}),Object(r.jsx)("button",{onClick:function(){e.createItems(e.state.itemsCount)},children:"Regenerate"}),"Items Count",Object(r.jsx)("input",{type:"number",value:this.state.itemsCount,min:1,onChange:function(t){e.updateParam("itemsCount",parseFloat(t.target.value))}}),Object(r.jsx)("hr",{}),Object(r.jsxs)("div",{children:[Object(r.jsx)("div",{style:{position:"fixed",right:100},children:this.state.selected&&s.length?this.renderItems([s.find((function(t){return t.item.id===e.state.selected}))]):Object(r.jsx)("li",{children:"Select item to edit"})}),Object(r.jsx)(m.a,{data:[{y:s.map((function(e){return e.trendingScore.toFixed(3)})),type:"box",name:"Value based trending score"},{y:s.map((function(e){return e.trendingOrderScore.toFixed(3)})),type:"box",name:"Order based trending score"}],layout:{width:600,height:400,title:"Trending Score distribution",showlegend:!0,xaxis:{showticklabels:!1},yaxis:{dtick:.1}},config:{displayModeBar:!1,editable:!1}}),Object(r.jsxs)("div",{className:"container",children:[Object(r.jsxs)("div",{children:[Object(r.jsx)("h2",{style:{textAlign:"center"},children:"Value based trending score"}),this.renderItems(s,!0)]}),Object(r.jsxs)("div",{children:[Object(r.jsx)("h2",{style:{textAlign:"center"},children:"Order based trending score"}),this.renderItems(o,!0,!0)]})]})]})]})}}]),n}(c.a.Component);s.a.render(Object(r.jsx)(c.a.StrictMode,{children:Object(r.jsx)(g,{})}),document.getElementById("root"))}},[[28,1,2]]]);
//# sourceMappingURL=main.7bddefb7.chunk.js.map